## Асинхронный кэш

Кэш с асинхронной загрузкой. При инициализации задаётся ttl, rewrite-ttl и максимальное количество записей:

* **K** - Тип ключа;
* **V** - Тип значения;
* **E** - Тип ошибки (ошибку не требуется обрабатывать или выполнять над ней преобразования - она возвращается
  пользователю
  в неизменном виде);
* **ttl** - Максимальное время жизни после записи/обновления; после истечения этого времени кэш не должен возвращать
  данную
  запись;
* **maxSize** - Максимальный размер кэша в количестве хранимых записей - при достижении лимита старые записи должны
  удаляться;
* **load** - Функция загрузки, определяется пользователем: по ключу возвращает значение. ps внутри данного вызова чаще
  всего
  взаимодействие по сети.
* **refreshAfterWriterTtl** - Время после которого можно обновить кэш, вызвав асинхронное получение значения по ключу;
    * Асинхронный вызов для обновления значения должен происходить только в том случае если по данному ключу получают
      значение (вызов get);

**Семантика метода get**:

* Если значения в кэше нет: синхронно вызывается load, после успешного получения ответа значение сохраняется в кэш и
  отдаётся пользователю; если вернулась ошибка при получении занчения - возвращаем пользователю ошибку (или None - в
  зависимости от метода);
* Если значение в кэше есть, но ttl истёк: пункт 1;
* Если значение в кэше есть, но rewrite-ttl истек: возвращаем значение из кэша и асинхронно вызываем load для
  обновления значение в кэше;
* Если значение в кэше есть (ttl и rewrite-ttl не истекли): возвращаем значение из кэша;

* Стратегия вымещения: LRU (Least Recently Used), ключ который дольше всего не испольщовался будет удален.
* В каждый момент времени делать load для одно и того же ключа может делать не более чем 1 поток.

#### Использовано для реализации

* FP Scala:
    * Monad
    * Async
    * Consoles
* cats-effect:
    * Sync
    * Spawn
    * Resource
    * Clock
    * Resource
* Примитивы MPP из cats-effect:
    * Supervisor
    * Ref
* Scala std lib:
    * Either
    * Option
    * FiniteDuration